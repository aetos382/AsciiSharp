# language: ja

@US1
フィーチャ: 基本的な AsciiDoc 文書の解析
    ライブラリユーザーとして、
    セクションと段落を含む AsciiDoc 文書を解析し、
    ロスレスな構文木を取得したい

    背景:
        前提 AsciiDoc パーサーが初期化されている

    @HeaderLess
    シナリオ: 本文のみを含む文章の解析
      前提 以下の AsciiDoc 文書がある:
        """
        Hello, AsciiDoc.
        """
      もし 文書を解析する
      かつ 構文木から完全なテキストを取得する
      ならば 構文木のルートは Document ノードである
      かつ Document ノードは Header を持たない
      かつ Document ノードは 1 個の段落を持つ
      かつ 再構築されたテキストは元の文書と一致する

    @Acceptance @Scenario1
    シナリオ: ドキュメントタイトルとセクションを含む文書の解析
        前提 以下の AsciiDoc 文書がある:
            """
            = ドキュメントタイトル

            == セクション 1

            これは段落です。

            == セクション 2

            これも段落です。
            """
        もし 文書を解析する
        ならば 構文木のルートは Document ノードである
        かつ Document ノードは Header を持つ
        かつ Header のタイトルは "ドキュメントタイトル" である
        かつ Document ノードは 2 個のセクションを持つ
        かつ セクション 1 のタイトルは "セクション 1" である
        かつ セクション 2 のタイトルは "セクション 2" である

    @Acceptance @Scenario2
    シナリオ: 構文木からの元テキスト再構築（ラウンドトリップ）
        前提 以下の AsciiDoc 文書がある:
            """
            = タイトル

            == セクション

            段落テキスト。
            複数行の段落。

            別の段落。
            """
        もし 文書を解析する
        かつ 構文木から完全なテキストを取得する
        ならば 再構築されたテキストは元の文書と一致する

    @Acceptance @Scenario3
    シナリオ: ネストされたセクションの解析
        前提 以下の AsciiDoc 文書がある:
            """
            = メインタイトル

            == レベル 2 セクション

            レベル 2 の内容。

            === レベル 3 セクション

            レベル 3 の内容。

            ==== レベル 4 セクション

            レベル 4 の内容。
            """
        もし 文書を解析する
        ならば 構文木のルートは Document ノードである
        かつ セクションのネスト構造が正しく解析されている

    @Paragraph
    シナリオ: 複数の段落の解析
        前提 以下の AsciiDoc 文書がある:
            """
            = タイトル

            最初の段落。

            2番目の段落。
            これは同じ段落の続き。

            3番目の段落。
            """
        もし 文書を解析する
        ならば Document ノードは 3 個の段落を持つ

    @Header
    シナリオ: ドキュメントヘッダーのみの文書
        前提 以下の AsciiDoc 文書がある:
            """
            = ドキュメントタイトル
            著者名
            """
        もし 文書を解析する
        ならば 構文木のルートは Document ノードである
        かつ Header のタイトルは "ドキュメントタイトル" である
        かつ Header は著者行を持つ

    @Whitespace
    シナリオ: 空白と改行の保持
        前提 以下の AsciiDoc 文書がある:
            """
            = タイトル

            段落テキスト。
            """
        もし 文書を解析する
        かつ 構文木から完全なテキストを取得する
        ならば 再構築されたテキストは元の文書と一致する
        かつ すべての空白と改行が保持されている

    @EmptyDocument
    シナリオ: 空の文書の解析
        前提 空の AsciiDoc 文書がある
        もし 文書を解析する
        かつ 構文木から完全なテキストを取得する
        ならば 構文木のルートは Document ノードである
        かつ Document ノードは Header を持たない
        かつ Document ノードは 0 個の段落を持つ
        かつ 再構築されたテキストは元の文書と一致する
